(this["webpackJsonpteamplanner-frontend"]=this["webpackJsonpteamplanner-frontend"]||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/team.48d82d68.png"},115:function(e,t,a){e.exports=a(168)},122:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=(a(117),a(118),a(106)),i=a.n(c),l=(a(122),a(8)),o=a.n(l),m=a(17),s=a(2),d=a(42),u=a(13),p=a(84),h=a(1),g=a.n(h),b=Object(n.createContext)(),f=function(e){var t=Object(n.useState)(g.a.get("nickname")),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement(b.Provider,{value:[c,i]},e.children)},E="https://teamplanner.xyz/",v={clientId:"524272934250-0eeakh761npvpo8th9s1lepqobgebjj5.apps.googleusercontent.com",websocketsUri:E+"sockets",oauthLoginUri:E+"oauth/login",oauthLogoutUri:E+"oauth/logout",chooseNicknameUri:E+"oauth/choosenickname",getMyGamesUri:E+"gameplans/all",getGameByIdUri:E+"gameplans/getById/",createGameUri:E+"gameplans/create",editGameUri:E+"gameplans/editById/",deleteGameUri:E+"gameplans/delete/",inviteFriendToGame:E+"gameplans/inviteToGame/",incomingGameInvites:E+"gameplans/incomingGameInvites",declineGameInvite:E+"gameplans/declineGameInvite/",acceptGameInvite:E+"gameplans/acceptGameInvite/",removeGameMember:E+"gameplans/removeGameMember/",getMyFriendsUri:E+"friends/myFriends",inviteFriendUri:E+"friends/invite",getIncomingRequestsUri:E+"friends/incomingRequests",acceptFriendRequestUri:E+"friends/acceptRequest",removeFriendUri:E+"friends/removeFriend",getFriendsInvitableToGame:E+"friends/invitableToGame/"},x=a(107),k=a.n(x),N=a(7),y=a(6);function j(e){var t=e.requestList,a=e.declineRequestFunction,n=e.acceptRequestFunction;return r.a.createElement("div",{className:"btn-group dropleft"},r.a.createElement("button",{type:"button",id:"friends-icon","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement(N.a,{size:"2x",icon:y.i}),0===t.length?null:r.a.createElement("i",{id:"friend-notification"},r.a.createElement(N.a,{size:"1x",icon:y.d}))),r.a.createElement("div",{className:"dropdown-menu mt-5 pl-1 dropdown-outer",id:"friendsDropdown"},r.a.createElement("h6",{className:"regular-text text-dark"},"Incoming requests"),r.a.createElement("hr",{className:"mb-0 mt-0 pb-2"}),r.a.createElement("div",{className:"requests-container"},t.map((function(e){return r.a.createElement("div",{className:"friend-request sub-bar",key:e},r.a.createElement("div",{className:"border rounded-lg border-secondary inner dropdown-inner pr-1 pl-1 pb-1 mb-1 h6",id:"dropdown-nicknames"}," ",e),r.a.createElement("button",{id:"decline-friendrequest",onClick:function(){return a(e)}},r.a.createElement(N.a,{icon:y.h})),r.a.createElement("button",{id:"accept-friendrequest",onClick:function(){return n(e)}},r.a.createElement(N.a,{icon:y.b})))})))))}function F(e){var t=e.declineGameInviteFunction,a=e.acceptRequestFunction,n=e.gameInvites;return r.a.createElement("div",{className:"btn-group dropleft"},r.a.createElement("button",{type:"button",id:"friends-icon","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement(N.a,{size:"2x",icon:y.a}),0===n.length?null:r.a.createElement("i",{id:"game-notification"},r.a.createElement(N.a,{size:"1x",icon:y.d}))),r.a.createElement("div",{className:"dropdown-menu mt-5 pl-1 dropdown-outer",id:"gamesDropdown"},r.a.createElement("h6",{className:"regular-text text-dark"},"Incoming game invites"),r.a.createElement("hr",{className:"mb-0 mt-0 pb-2"}),r.a.createElement("div",{className:"requests-container"},n.map((function(e){return r.a.createElement("div",{key:e[0]+e[1]},r.a.createElement("div",{className:"friend-request sub-bar"},r.a.createElement("div",{className:"border rounded-lg border-secondary inner dropdown-inner pr-1 pl-1 pb-1 mb-1 h6",id:"dropdown-nicknames"}," ",e[0]),r.a.createElement("h6",{className:"pl-1"},"invites you to:"),r.a.createElement("button",{id:"decline-friendrequest",onClick:function(){return t(e[2])}},r.a.createElement(N.a,{icon:y.h})),r.a.createElement("button",{id:"accept-friendrequest",onClick:function(){return a(e[2])}},r.a.createElement(N.a,{icon:y.b}))),r.a.createElement("div",null,r.a.createElement("h5",null,e[1])),r.a.createElement("hr",{className:"mb-0 mt-0 pb-2"}))})))))}var T=a(108),w=a(109),O=a.n(w);function S(e){var t=Object(n.useContext)(b),a=Object(s.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)([]),h=Object(s.a)(l,2),f=h[0],E=h[1],x=Object(n.useState)([]),N=Object(s.a)(x,2),y=N[0],w=N[1],S=Object(d.g)(),C=Object(d.h)();Object(n.useEffect)((function(){i(g.a.get("nickname")),A(),P()}),[i]),Object(n.useEffect)((function(){var e=null;return void 0!==c&&"*()failed"!==c&&"*()unset"!==c&&((e=O.a.over(new T(v.websocketsUri))).debug=null,e.connect({},(function(t){e.subscribe("/user/queue/requests",(function(e){"Friend request"===e.body?A():"Game invite"===e.body&&P()}))}),(function(e){e.startsWith("Whoops!")&&(S.push("/"),S.push(C.pathname))}))),function(){null!==e&&"CONNECTED"===e.status&&e.disconnect()}}),[S,c]);var G=function(e){Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,fetch(v.oauthLoginUri,{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},credentials:"include",body:JSON.stringify({authCode:e.code})});case 3:200===t.sent.status?(i(g.a.get("nickname")),"*()unset"===g.a.get("nickname")?S.push("/chooseNickname"):S.push("/")):(i("*()failed"),S.push(C.pathname));case 5:case"end":return t.stop()}}),t)})))()},A=function(){void 0!==g.a.get("nickname")&&"*()failed"!==g.a.get("nickname")&&Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v.getIncomingRequestsUri,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){E(e)}));case 2:case"end":return e.stop()}}),e)})))()},P=function(){void 0!==g.a.get("nickname")&&"*()failed"!==g.a.get("nickname")&&Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v.incomingGameInvites,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){w(e)}));case 2:case"end":return e.stop()}}),e)})))()};return r.a.createElement("nav",{className:"navbar sticky-top navbar-expand navbar-dark bg-dark"},r.a.createElement("div",{className:"container",id:"navbar-container"},r.a.createElement(u.b,{to:"/"},r.a.createElement("img",{id:"nav-logo",src:k.a,alt:"logo"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse pl-4",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement(u.b,{to:"/"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("span",{className:"nav-link",href:"/"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)")))),r.a.createElement(u.b,{to:"/friends"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("span",{className:"nav-link"},"Friends ",r.a.createElement("span",{className:"sr-only"},"(current)")))),r.a.createElement(u.b,{to:"/games"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("span",{className:"nav-link"},"Plans ",r.a.createElement("span",{className:"sr-only"},"(current)"))))),void 0!==c&&"*()failed"!==c&&"*()unset"!==c?r.a.createElement("div",{id:"nickname-requests"},r.a.createElement(F,{acceptRequestFunction:function(e){Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v.acceptGameInvite+e,{credentials:"include",method:"PATCH",headers:{"Content-type":"text/plain"}}).then((function(e){P(),200===e.status&&"/games"===C.pathname&&(S.push("/"),S.push("/games"))}));case 2:case"end":return t.stop()}}),t)})))()},getRequests:A,declineGameInviteFunction:function(e){Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v.declineGameInvite+e,{credentials:"include",method:"DELETE",headers:{"Content-type":"text/plain"}}).then((function(e){P()}));case 2:case"end":return t.stop()}}),t)})))()},gameInvites:y}),r.a.createElement(j,{acceptRequestFunction:function(e){Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v.acceptFriendRequestUri,{credentials:"include",method:"PATCH",headers:{"Content-type":"text/plain"},body:e}).then((function(e){A(),200===e.status&&"/friends"===C.pathname&&(S.push("/"),S.push("/friends"))}));case 2:case"end":return t.stop()}}),t)})))()},getRequests:A,declineRequestFunction:function(e){Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v.removeFriendUri,{credentials:"include",method:"DELETE",headers:{"Content-type":"text/plain"},body:e}).then((function(e){A()}));case 2:case"end":return t.stop()}}),t)})))()},requestList:f}),r.a.createElement(u.b,{to:"/chooseNickname"},r.a.createElement("div",{id:"nickname"},c))):r.a.createElement("div",null,"\xa0"),void 0===c||"*()failed"===c?r.a.createElement(p.GoogleLogin,{clientId:v.clientId,scope:"profile email openid",accessType:"offline",prompt:"consent",uxMode:"redirect",redirectUri:v.backendAddress,responseType:"code",buttonText:"Log-in",onSuccess:G,onFailure:G,cookiePolicy:"single_host_origin"}):r.a.createElement(p.GoogleLogout,{clientId:v.clientId,buttonText:"Log-out",onLogoutSuccess:function(){if(void 0===g.a.get("nickname"))return i(void 0),S.push("/"),void S.push(C.pathname);Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v.oauthLogoutUri,{credentials:"include",method:"POST",headers:{Accept:"text/plain","Content-type":"text/plain"}});case 2:case"end":return e.stop()}}),e)})))(),i(void 0),S.push("/"),S.push(C.pathname)}}))))}function C(){var e=Object(n.useContext)(b),t=Object(s.a)(e,1)[0];return r.a.createElement("h2",{className:"regular-text"},"Welcome, ",String(t)," !")}function G(e){var t=e.functionArgument,a="";a=Array.isArray(e.functionArgument)?e.functionArgument[0]+e.functionArgument[1]:e.functionArgument;var n=e.functionToExecute,c=e.warningArgument,i=e.actionPrefix,l=e.warningText;return r.a.createElement("div",{className:"modal fade bd-example-modal-lg",id:"modalPopupId"+i+a,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content",name:"modal-"+c},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title",id:"exampleModalLongTitle"},l," ",c),r.a.createElement("button",{type:"button",className:"close",id:"modalClose","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("h5",null,"Are you sure ?")),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return n(t)},"data-dismiss":"modal"},"Delete")))))}function A(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useContext)(b),l=Object(s.a)(i,2),o=l[0],m=l[1],p=Object(d.g)(),h=Object(d.h)(),f={background:"rgb(169, 192, 124)"},E={background:"rgb(124, 170, 192)"};Object(n.useEffect)((function(){m(g.a.get("nickname")),void 0!==g.a.get("nickname")&&"*()unset"!==g.a.get("nickname")&&fetch(v.getMyGamesUri,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){c(e)}))}),[m]);var x=function(e){fetch(v.deleteGameUri+e,{credentials:"include",method:"DELETE"}).then((function(e){p.push("/"),p.push(h.pathname)}))},k=function(e){fetch(v.removeGameMember+e[1],{credentials:"include",method:"DELETE",body:e[0]}).then((function(e){p.push("/"),p.push(h.pathname)}))};return r.a.createElement("div",{id:"card-container",className:"card-deck"},r.a.createElement("div",{className:"col-12 ml-1 sub-bar"},r.a.createElement(u.b,{to:"/createPlan"},r.a.createElement("button",{id:"add-button"},r.a.createElement(N.a,{icon:y.f,size:"2x"}))),r.a.createElement("h1",{className:"regular-text"},"Plans")),a.map((function(e){return r.a.createElement("div",{className:"col-sm-12 col-md-6 col-lg-4 mt-2 mb-4",key:e.id},r.a.createElement("div",{className:"card",style:e.authorNickname===o?f:E},r.a.createElement("div",{className:"card-body mb-0 p-0"},e.authorNickname===o?r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{functionArgument:e.id,functionToExecute:x,actionPrefix:"game",warningText:"Deleting: ",warningArgument:e.title}),r.a.createElement("button",{id:"delete-game","data-toggle":"modal","data-target":"#modalPopupIdgame"+e.id},r.a.createElement(N.a,{icon:y.h}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{functionArgument:[o,e.id],functionToExecute:k,actionPrefix:"leaveGame",warningText:"Leaving plan: ",warningArgument:e.title}),r.a.createElement("button",{id:"delete-game","data-toggle":"modal","data-target":"#modalPopupIdleaveGame"+o+e.id},r.a.createElement(N.a,{icon:y.h}))),r.a.createElement("h5",{className:"card-title h5 pl-3 pr-4"},e.title)),r.a.createElement("hr",{className:"mb-0 mt-0"}),r.a.createElement("h6",{className:"ml-3"},"By: ",e.authorNickname),r.a.createElement("div",{className:"card-footer pl-3"},r.a.createElement("small",{className:"text-muted"},"Created: ",new Date(e.creationDateTime).toLocaleString("en-GB")+" GMT+"+(new Date).getTimezoneOffset()/-60),r.a.createElement(u.b,{to:"/game/"+e.id},r.a.createElement("button",{id:"game-details"},r.a.createElement(N.a,{icon:y.e}))))))})))}var P=["Can't choose same nickname","Nickname taken","Error, user doesn't exist","Incorrect nickname"],I=["Game plan with this title already exists","You are not in this game"],q=["Request is pending","This person is already your friend","Can't invite yourself"];function U(e){return"Nickname changed"===e.statusProp||"Game plan created"===e.statusProp||"Friend request sent"===e.statusProp?r.a.createElement("h4",{className:"text-success"},e.statusProp):P.includes(e.statusProp)||I.includes(e.statusProp)||q.includes(e.statusProp)?r.a.createElement("h4",{className:"text-danger"},e.statusProp):r.a.createElement("div",{className:"empty-sizeless-div"},"\xa0")}var M=a(83),z=a.n(M);function L(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],i=a[1],l=Object(n.useContext)(b),o=Object(s.a)(l,2)[1],m=function(){var t=e.gameId;o(g.a.get("nickname")),fetch(v.getFriendsInvitableToGame+t,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return 403===e.status?(i("Error"),"403"):e.json()})).then((function(e){"403"!==e.toString()&&i(e)}))};return z()(".dropright").unbind().on("show.bs.dropdown",(function(){m()})),Object(n.useEffect)((function(){m()}),[]),r.a.createElement("div",{className:"btn-group dropright"},r.a.createElement("button",{type:"button",id:"add-member","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement(N.a,{size:"1x",icon:y.f})),r.a.createElement("div",{className:"dropdown-menu mt-5 pl-1",id:"addMemberDropdown"},r.a.createElement("h6",{className:"regular-text text-dark"},"Add friend to plan"),r.a.createElement("hr",{className:"mb-0 mt-0 pb-2"}),r.a.createElement("div",{className:"requests-container"},c.map((function(t){return r.a.createElement("div",{className:"friend-request sub-bar",key:t},r.a.createElement("div",{className:"border rounded-lg border-secondary inner dropdown-inner pr-1 pl-1 pb-1 mb-1 h6",id:"dropdown-nicknames"}," ",t),r.a.createElement("button",{id:"accept-friendrequest",onClick:function(){return a=t,o(g.a.get("nickname")),void fetch(v.inviteFriendToGame+e.gameId,{credentials:"include",method:"PUT",headers:{Accept:"text/plain","Content-type":"text/plain"},body:a}).then((function(e){return 200!==e.status&&o(g.a.get("nickname")),e.text()}));var a}},r.a.createElement(N.a,{icon:y.g})))})))))}function D(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)([]),o=Object(s.a)(l,2),m=o[0],p=o[1],h=Object(n.useContext)(b),f=Object(s.a)(h,2),E=f[0],x=f[1],k=Object(n.useState)(!1),j=Object(s.a)(k,2),F=j[0],T=j[1],w=Object(d.g)(),O=e.match,S=c.authorNickname===g.a.get("nickname"),C={background:"rgb(169, 192, 124)"},A={background:"rgb(161, 192, 196)"};Object(n.useEffect)((function(){var e=[O.params.id];x(g.a.get("nickname")),void 0!==g.a.get("nickname")&&"*()unset"!==g.a.get("nickname")&&fetch(v.getGameByIdUri+e,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return 403===e.status?(i("You are not in this game"),"403"):e.json()})).then((function(e){"403"!==e.toString()&&(i(e),p(e.members),T(!0))}))}),[x,O]);var P=function(e){fetch(v.removeGameMember+e[1],{credentials:"include",method:"DELETE",body:e[0]}).then((function(t){w.push("/game/"+e[1])}))};return r.a.createElement("div",{className:"col-12 mt-2 mb-4"},F?r.a.createElement(r.a.Fragment,null,"You are not in this game"===c.toString()?r.a.createElement(U,{statusProp:c.toString()}):r.a.createElement(r.a.Fragment,null,S?r.a.createElement("div",{className:"col-12"},r.a.createElement(u.b,{to:"/editPlan/"+c.id},r.a.createElement("button",{id:"edit-button"},r.a.createElement(N.a,{icon:y.c,size:"2x"})))):null,r.a.createElement("div",{className:"card mt-2",style:S?C:{background:"rgb(129, 172, 179)"}},r.a.createElement("div",{className:"card-body mb-0 p-0"},S?r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{functionArgument:c.id,functionToExecute:function(e){fetch(v.deleteGameUri+e,{credentials:"include",method:"DELETE"}).then((function(e){w.push("/games")}))},actionPrefix:"game",warningText:"Deleting: ",warningArgument:c.title}),r.a.createElement("button",{id:"delete-game","data-toggle":"modal","data-target":"#modalPopupIdgame"+c.id},r.a.createElement(N.a,{icon:y.h}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{functionArgument:[E,c.id],functionToExecute:function(e){fetch(v.removeGameMember+e[1],{credentials:"include",method:"DELETE",body:e[0]}).then((function(e){w.push("/games")}))},actionPrefix:"leaveGame",warningText:"Leaving plan: ",warningArgument:c.title}),r.a.createElement("button",{id:"delete-game","data-toggle":"modal","data-target":"#modalPopupIdleaveGame"+E+c.id},r.a.createElement(N.a,{icon:y.h}))),r.a.createElement("h5",{className:"card-title h5 pl-3 pr-4"},c.title)),r.a.createElement("hr",{className:"mb-0 mt-0"}),S?r.a.createElement(L,{gameId:[O.params.id]}):null,r.a.createElement("h5",{className:"pl-4 pr-1"},"Members:"),r.a.createElement("div",{className:"plan-members pl-2 mt-1 ml-1",id:S?null:"guest-plan-members"},m.map((function(e){return r.a.createElement("div",{className:"game-member border rounded-lg border-secondary mr-1 pr-1 pl-1 pb-1 mb-1 h6",key:"member"+e,style:S?C:A},r.a.createElement("div",null,e),S?r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{actionPrefix:"gameMember",functionArgument:[e,c.id],functionToExecute:P,warningText:"Removing: ",warningArgument:e}),r.a.createElement("button",{className:"pl-1",id:"remove-gamemember","data-toggle":"modal","data-target":"#modalPopupIdgameMember"+e+c.id},r.a.createElement(N.a,{icon:y.h}))):null)}))),r.a.createElement("hr",{className:"mb-0 mt-1 mb-1",id:"main-text-dividor"}),r.a.createElement("pre",{className:"ml-3 mainText"},c.mainText),r.a.createElement("hr",{className:"mb-0 mt-0"}),r.a.createElement("h6",{className:"ml-3"},"By: ",c.authorNickname),r.a.createElement("div",{className:"card-footer"},r.a.createElement("small",{className:"text-muted"},"Created: ",new Date(c.creationDateTime).toLocaleString("en-GB")+" GMT+"+(new Date).getTimezoneOffset()/-60))))):null)}function B(){return r.a.createElement("h1",{className:"regular-text"},"Please log in")}function R(){return r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",{id:"welcome"},"Welcome to Teamplanner!"),r.a.createElement("div",{className:"welcome-description"},r.a.createElement("p",null,"Log in and choose a nickname. Create a plan for any needs you want:"),r.a.createElement("p",null," meeting, event, game session with friends or just a reminder to yourself."),r.a.createElement("p",null,"Add your friends by their nickname and invite them them to your plans")))}var _=a(111),Z=a(20),W=a(38);function $(e){var t=e.touched,a=e.message;return t?r.a.createElement("div",{className:"font-weight-bold text-danger"},a):r.a.createElement("div",{className:"empty-sizeless-div"},"\xa0")}var J=Z.a().shape({nicknameField:Z.b().max(16,"Maximum length: 16").required("Minimum length: 1").matches("^[a-zA-Z0-9\\[\\]!@_-]{1,16}$","Only A-Z, a-z, 0-9, []!@_- characters are allowed")});function H(){var e=Object(n.useContext)(b),t=Object(s.a)(e,2)[1];return r.a.createElement(W.a,{initialValues:{nicknameField:""},validationSchema:J,onSubmit:function(e,a){var n=a.setSubmitting,r=a.setStatus;n(!0),Object(m.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(v.chooseNicknameUri,{credentials:"include",method:"PUT",headers:{Accept:"text/plain","Content-type":"text/plain"},body:e.nicknameField}).then((function(e){return 200!==e.status&&t(g.a.get("nickname")),e.text()})).then((function(e){r(e),"Nickname changed"===e&&t(g.a.get("nickname"))}));case 2:n(!1);case 3:case"end":return a.stop()}}),a)})))()}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,o=e.isSubmitting,m=e.status;return r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group regular-text",id:"nicknameForm"},r.a.createElement("h2",{className:"font-weight-bold"},"Set your nickname"),r.a.createElement("input",{type:"text",className:n.nicknameField&&a.nicknameField?"form-control is-invalid":"form-control",name:"nicknameField",id:"nicknameField",placeholder:"nickname",onChange:c,onBlur:i,value:t.nicknameField}),r.a.createElement($,{touched:n.nicknameField,message:a.nicknameField}),r.a.createElement(U,{statusProp:m})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:o},"Submit"))}))}var V=function(e){var t=e.component,a=Object(_.a)(e,["component"]),c=Object(n.useContext)(b),i=Object(s.a)(c,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){o(g.a.get("nickname"))}),[o]),r.a.createElement(d.b,Object.assign({},a,{render:function(e){return void 0!==l&&"*()failed"!==l&&"*()unset"!==l?r.a.createElement(t,e):void 0===l?r.a.createElement(d.a,{to:{pathname:"/unauthorized",state:{from:e.location}}}):"*()unset"===l?r.a.createElement(H,e):r.a.createElement("h2",{className:"regular-text"},"Login error, please try again")}}))},Y=Z.a().shape({titleField:Z.b().max(50,"Maximum length: 50").required("Minimum length: 1").matches("^[a-zA-Z0-9 ,:\\[\\]!@_-]{1,50}$","Only A-Z, a-z, 0-9, []!@_- characters are allowed"),mainTextField:Z.b().max(3e3,"Maximum length: 3000").required("Minimum length: 1").matches("^[a-zA-Z0-9 ,:;'/!.\n\\[\\]!@_-]{1,3000}$","Only A-Z, a-z, 0-9, []!@_- characters are allowed")});function K(){var e=Object(n.useContext)(b),t=Object(s.a)(e,2)[1],a=Object(d.g)();return r.a.createElement(W.a,{initialValues:{titleField:"",mainTextField:""},validationSchema:Y,onSubmit:function(e,n){var r=n.setSubmitting,c=n.setStatus;r(!0),fetch(v.createGameUri,{credentials:"include",method:"PUT",headers:{Accept:"text/plain","Content-type":"application/json"},body:JSON.stringify({title:e.titleField,mainText:e.mainTextField})}).then((function(e){return 200!==e.status&&t(g.a.get("nickname")),e.text()})).then((function(e){c(e),"Game plan created"===e&&a.push("/games")})),r(!1)}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,o=e.isSubmitting,m=e.status;return r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group regular-text",id:"planForm"},r.a.createElement("h2",{className:"font-weight-bold"},"Create a game plan"),r.a.createElement("input",{type:"text",className:n.titleField&&a.titleField?"form-control is-invalid":"form-control",name:"titleField",id:"titleField",placeholder:"Title",onChange:c,onBlur:i,value:t.titleField}),r.a.createElement($,{touched:n.titleField,message:a.titleField}),r.a.createElement("br",null),r.a.createElement("textarea",{type:"text",rows:"20",className:n.mainTextField&&a.mainTextField?"form-control is-invalid":"form-control",name:"mainTextField",id:"mainTextField",placeholder:"Details, Maximum 3000 characters",onChange:function(e){c(e)},onBlur:i,value:t.mainTextField}),t.mainTextField.length,"/3000",r.a.createElement($,{touched:n.mainTextField,message:a.mainTextField}),r.a.createElement(U,{statusProp:m})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:o},"Submit"))}))}var Q=Z.a().shape({mainTextField:Z.b().max(3e3,"Maximum length: 3000").required("Minimum length: 1").matches("^[a-zA-Z0-9 ,:;'/!.\n\\[\\]!@_-]{1,3000}$","Only A-Z, a-z, 0-9, []!@_- characters are allowed")});function X(e){var t=e.match,a=Object(n.useContext)(b),c=Object(s.a)(a,2)[1],i=Object(d.g)(),l=Object(d.i)().id,o=Object(n.useState)(""),m=Object(s.a)(o,2),u=m[0],p=m[1];return Object(n.useEffect)((function(){var e=[t.params.id];c(g.a.get("nickname")),void 0!==g.a.get("nickname")&&"*()unset"!==g.a.get("nickname")&&fetch(v.getGameByIdUri+e,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return 403===e.status?(p("You are not in this game"),"403"):e.json()})).then((function(e){"403"!==e.toString()&&p(e.mainText)}))}),[t,c]),r.a.createElement(W.a,{enableReinitialize:!0,initialValues:{mainTextField:u},validationSchema:Q,onSubmit:function(e,t){var a=t.setSubmitting,n=t.setStatus;a(!0),fetch(v.editGameUri+l,{credentials:"include",method:"PATCH",headers:{Accept:"text/plain","Content-type":"application/json"},body:JSON.stringify({mainText:e.mainTextField})}).then((function(e){return 200!==e.status&&c(g.a.get("nickname")),e.text()})).then((function(e){n(e),"Game plan edited"===e&&i.push("/game/"+l)})),a(!1)}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,o=e.isSubmitting,m=e.status;return r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group regular-text",id:"planForm"},r.a.createElement("h2",{className:"font-weight-bold"},"Edit details of your plan"),r.a.createElement("textarea",{type:"text",rows:"20",className:n.mainTextField&&a.mainTextField?"form-control is-invalid mainText":"form-control mainText",name:"mainTextField",id:"mainTextField",placeholder:"Details, Maximum 3000 characters",onChange:function(e){c(e)},onBlur:i,value:t.mainTextField}),t.mainTextField.length,"/3000",r.a.createElement($,{touched:n.mainTextField,message:a.mainTextField}),r.a.createElement(U,{statusProp:m})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:o},"Submit"))}))}function ee(){var e=Object(n.useContext)(b),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),l=Object(s.a)(i,2),p=l[0],h=l[1],f=Object(d.g)(),E=Object(d.h)();Object(n.useEffect)((function(){c(g.a.get("nickname")),void 0!==g.a.get("nickname")&&"*()unset"!==g.a.get("nickname")&&fetch(v.getMyFriendsUri,{credentials:"include",method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){h(e)}))}),[a,c]);var x=function(e){Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v.removeFriendUri,{credentials:"include",method:"DELETE",headers:{"Content-type":"text/plain"},body:e}).then((function(e){200===e.status&&"/friends"===E.pathname&&(f.push("/"),f.push("/friends"))}));case 2:case"end":return t.stop()}}),t)})))()};return r.a.createElement("div",{id:"card-container",className:"card-deck"},r.a.createElement("div",{className:"col-12 ml-1 sub-bar"},r.a.createElement(u.b,{to:"/addFriend"},r.a.createElement("button",{id:"add-button"},r.a.createElement(N.a,{icon:y.f,size:"2x"}))),r.a.createElement("h1",{className:"regular-text"},"Friends")),p.map((function(e){return r.a.createElement("div",{className:"col-sm-12 col-md-6 col-lg-4 mt-2 mb-4",key:e},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body mb-0 p-0"},r.a.createElement(G,{functionArgument:e,functionToExecute:x,actionPrefix:"deleteFriend",warningText:"Removing friend: ",warningArgument:e}),r.a.createElement("button",{id:"delete-game","data-toggle":"modal","data-target":"#modalPopupIddeleteFriend"+e},r.a.createElement(N.a,{icon:y.h})),r.a.createElement("h5",{className:"card-title h5 pl-3 pr-4"},e))))})))}var te=Z.a().shape({nicknameField:Z.b().max(16,"Maximum length: 16").required("Minimum length: 1").matches("^[a-zA-Z0-9\\[\\]!@_-]{1,16}$","Only A-Z, a-z, 0-9, []!@_- characters are allowed")});function ae(){var e=Object(n.useContext)(b),t=Object(s.a)(e,2)[1];return r.a.createElement(W.a,{initialValues:{nicknameField:""},validationSchema:te,onSubmit:function(e,a){var n=a.setSubmitting,r=a.setStatus;n(!0),Object(m.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(v.inviteFriendUri,{credentials:"include",method:"PUT",headers:{Accept:"text/plain","Content-type":"text/plain"},body:e.nicknameField}).then((function(e){return 200!==e.status&&t(g.a.get("nickname")),e.text()})).then((function(e){r(e),"Nickname changed"===e&&t(g.a.get("nickname"))}));case 2:n(!1);case 3:case"end":return a.stop()}}),a)})))()}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,o=e.isSubmitting,m=e.status;return r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group regular-text",id:"nicknameForm"},r.a.createElement("h2",{className:"font-weight-bold"},"Invite a friend"),r.a.createElement("input",{type:"text",className:n.nicknameField&&a.nicknameField?"form-control is-invalid":"form-control",name:"nicknameField",id:"nicknameField",placeholder:"nickname",onChange:c,onBlur:i,value:t.nicknameField}),r.a.createElement($,{touched:n.nicknameField,message:a.nicknameField}),r.a.createElement(U,{statusProp:m})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:o},"Submit"))}))}var ne=function(){return r.a.createElement(f,null,r.a.createElement(u.a,null,r.a.createElement(S,null),r.a.createElement("div",{className:"container",id:"main-container"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,component:R}),r.a.createElement(d.b,{path:"/unauthorized",component:B}),r.a.createElement(V,{path:"/chooseNickname",component:H}),r.a.createElement(V,{path:"/games",exact:!0,component:A}),r.a.createElement(V,{path:"/game/:id",exact:!0,component:D}),r.a.createElement(V,{path:"/createPlan",component:K}),r.a.createElement(V,{path:"/editPlan/:id",exact:!0,component:X}),r.a.createElement(V,{path:"/account",component:C}),r.a.createElement(V,{path:"/friends",component:ee}),r.a.createElement(V,{path:"/addFriend",component:ae})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(167);i.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.7ecccd5c.chunk.js.map